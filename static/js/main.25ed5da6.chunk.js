(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{17:function(e,t,n){e.exports=n(36)},22:function(e,t,n){},34:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n.n(a),r=n(15),i=n.n(r),c=(n(22),n(4)),s=n(6),l=n(8),u=n(7),d=n(5),h=n(9),f=n(13),b=n.n(f),p=(n(34),n(35),function e(t,n,a){if(Object(c.a)(this,e),this.t=t,!a&&!Array.isArray(a)){var o=[a,n];n=o[0],a=o[1]}this.id=n,("string"==typeof a||a instanceof e)&&(a=[a]),this.c=a});function v(e){var t=0,n={t:void 0,c:[]},a=n;if(e){for(var o=e.split("\n"),r=0;r<o.length;++r){var i=o[r];if(i){var c=i.match(/^(#+|\*o*|t\() /);if(c){if(c=c[1],i=i.slice(c.length+1,i.length)){"t("==c&&function(){var e="td";"table"!=a.t&&(a=new p("table",++t,[]),e="th",n.c.push(a)),a.c.push(new p("tr",++t,i.split(",").map((function(n){return new p(e,++t,new p("Sec",++t,n.trim()))}))))}();var s=new p("Sec",++t,i);if("#"==c[0]&&c.length<7)(a=n).c.push(new p("h"+c.length,++t,s));else if("*"==c[0]){var l="*o"==c?"ol":"ul";a.t!=l&&(a=new p(l,++t,[]),n.c.push(a)),a.c.push(new p("li",++t,s))}}}else(a=n).c.push(new p("p",++t,new p("Sec",++t,i)))}}return n.c}}var m=[new p("Sec",1,new p("p","this is a test")),new p("Sec",13,new p("p","The second line")),new p("table",2,[new p("tr",3,[new p("th",4,new p("Sec",5,"cell 1")),new p("th",6,new p("Sec",7,"cell 2"))]),new p("tr",8,[new p("td",9,new p("Sec",10,"cell 3")),new p("td",11,new p("Sec",12,"cell 4"))])])],k=v("# title 1\nsome description of a paragraph.\n## subtitle 2.\n* item x\n* item y\n\n## another subtitle 2.\n*o item 1\n*o item 2\n\n# more title 1.\na basic table.\nt( header cell 1, header cell 2\nt( content cell 1, content cell 2\n"),C=function e(t,n,a){Object(c.a)(this,e),this.title=t,this.content=n,this.lastFocusId=void 0,this.id=a},w={currentBoard:0,lastId:1,lastFocusId:void 0,lastBoardId:void 0,boards:{0:new C("hola 1",m,0),1:new C("hola 2",k,1)}};b.a.initializeApp({apiKey:"AIzaSyB6JklybdPvmLcJigv8Z9dswNmF3LTQcFM",authDomain:"accessible-remote-board.firebaseapp.com",databaseURL:"https://accessible-remote-board.firebaseio.com",projectId:"accessible-remote-board",storageBucket:"accessible-remote-board.appspot.com",messagingSenderId:"493998861743",appId:"1:493998861743:web:4155c8afbc234b0e80135a",measurementId:"G-BB9MKZNJS9"});var g=b.a.database(),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).focus=n.focus.bind(Object(d.a)(n)),n.refSpan=o.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"focus",value:function(){this.refSpan.current.focus()}},{key:"render",value:function(){return o.a.createElement("span",{tabIndex:"-1","data-focusid":this.props["data-focusid"],ref:this.refSpan},this.props.children)}}]),t}(o.a.Component),B=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).childrenRefs={},n.refHead=o.a.createRef(),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"createContent",value:function(){var e=this.props.content;if(e){var t={},n=function e(n,a){var r=[];for(var i in n)if("string"!==typeof(i=n[i])){if(i.t){var c=void 0,s=a,l=i.t,u=i.c;"table"===l?u=[new p("tbody",u)]:"Sec"===l&&(c=o.a.createRef(),t[i.id]=c,l=y,s=i.id),r.push(o.a.createElement(l,{key:i.id,ref:c,"data-focusid":s,children:e(u,s)}))}}else r.push(i);return r}(e);return this.childrenRefs=t,n}}},{key:"setRefFocus",value:function(e){this.childrenRefs[e]&&this.childrenRefs[e].current.focus(),w.boards[w.currentBoard].lastFocusId=e}},{key:"setLastFocus",value:function(){this.props.boardData&&this.props.boardData.lastFocusId?this.setRefFocus(this.props.boardData.lastFocusId):this.refHead.current.focus()}},{key:"componentDidUpdate",value:function(){this.props.autoFocus&&this.setLastFocus()}},{key:"componentDidMount",value:function(){this.props.autoFocus&&this.setLastFocus()}},{key:"render",value:function(){return o.a.createElement("div",{onClick:this.props.onClick},o.a.createElement("h1",{tabIndex:"-1",ref:this.refHead},this.props.title),this.createContent())}}]),t}(o.a.Component);B.defaultProps={autoFocus:!0};var j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleContentChange=n.handleContentChange.bind(Object(d.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(d.a)(n)),n.state={title:"",value:""},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("h1",null,"preview"),o.a.createElement(B,{title:this.state.title,content:v(this.state.content),autoFocus:!1}),o.a.createElement("h1",null,"Input"),o.a.createElement("label",{htmlFor:"input-title"},"Enter title"),o.a.createElement("input",{autoFocus:!0,type:"text",id:"input-title",onChange:this.handleTitleChange,defaultValue:this.state.title}),o.a.createElement("label",{htmlFor:"input-content"},"Enter some content"),o.a.createElement("textarea",{id:"input-content",onChange:this.handleContentChange,defaultValue:this.state.content}),o.a.createElement("button",{onClick:function(){return e.props.onDone(new C(e.state.title,v(e.state.content)))}},"Done!"),o.a.createElement("button",{onClick:this.props.onCancel},"Cancel"))}}]),t}(o.a.Component),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleClickPrior=n.handleClickPrior.bind(Object(d.a)(n)),n.handleClickNext=n.handleClickNext.bind(Object(d.a)(n)),n.handleClickBoard=n.handleClickBoard.bind(Object(d.a)(n)),n.onDone=n.onDone.bind(Object(d.a)(n)),n.refBoard=o.a.createRef(),n.state={currentBoard:0,editing:!1,editCurrent:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.listenEvents()}},{key:"listenEvents",value:function(){var e=this;g.ref("lastFocusId").on("value",(function(t){var n=t.val();console.log("ultimo focus",n),n&&(e.refBoard.current.setRefFocus(n),w.lastFocusId=n)})),g.ref("lastBoardId").on("value",(function(t){var n=t.val();console.log("ultimo lastBoardId",n,typeof n),"number"==typeof n&&(e.changeBoard(n,!0),w.lastBoardId=n)})),g.ref("boards").endAt().limitToLast(1).on("child_added",(function(e){var t=e.val();console.log("ultimo boardData",t)}))}},{key:"handleClickBoard",value:function(e){var t=e.target.dataset.focusid;t&&(w.boards[w.currentBoard].lastFocusId=t,g.ref("lastFocusId").set(t))}},{key:"addBoard",value:function(e){return e.id||(e.id=++w.id),w.boards[e.id]=e,this.changeBoard(e.id),e}},{key:"changeBoard",value:function(e,t){w.boards.hasOwnProperty(e)&&(w.currentBoard=e,this.setState({currentBoard:e}),t||g.ref("lastBoardId").set(e))}},{key:"handleClickPrior",value:function(){var e=this.state.currentBoard;--e,this.changeBoard(e)}},{key:"handleClickNext",value:function(){var e=this.state.currentBoard;++e,this.changeBoard(e)}},{key:"onDone",value:function(e){this.state.editCurrent?this.updateBoard(e):this.addBoard(e),this.setState({editing:!1})}},{key:"render",value:function(){var e=this;return this.state.editing?o.a.createElement(j,{onDone:this.onDone,onCancel:function(){return e.setState({editing:!1,editCurrent:!1})}}):o.a.createElement("div",{"aria-live":"assertive"},o.a.createElement(B,{title:w.boards[w.currentBoard].title,content:w.boards[w.currentBoard].content,onClick:this.handleClickBoard,boardData:w.boards[w.currentBoard],ref:this.refBoard}),o.a.createElement("button",{onClick:this.handleClickPrior},"previous board"),o.a.createElement("button",{onClick:this.handleClickNext},"Next board"),o.a.createElement("button",{onClick:function(t){return e.setState({editing:!0})}},"New board"))}}]),t}(o.a.Component),E=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={user:null},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(O,null))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.25ed5da6.chunk.js.map