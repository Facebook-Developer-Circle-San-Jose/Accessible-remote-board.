(window["webpackJsonpmy-app"]=window["webpackJsonpmy-app"]||[]).push([[0],{18:function(e,t,n){e.exports=n.p+"static/media/chatnotif.82bb2a7e.mp3"},19:function(e,t,n){e.exports=n(38)},24:function(e,t,n){},36:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(15),i=n.n(o),s=(n(24),n(16)),c=n(5),l=n(7),u=n(9),d=n(8),h=n(4),f=n(10),b=n(6),m=n.n(b),p=(n(36),n(18)),v=n.n(p),g=(n(37),function e(t,n,a){if(Object(c.a)(this,e),this.t=t,!a&&!Array.isArray(a)){var r=[a,n];n=r[0],a=r[1]}this.id=n,("string"==typeof a||a instanceof e)&&(a=[a]),this.c=a});function k(e){var t=0,n={t:void 0,c:[]},a=n;if(e){for(var r=e.split("\n"),o=0;o<r.length;++o){var i=r[o];if(i){var s=i.match(/^(#+|\*o*|t\() /);if(s){if(s=s[1],i=i.slice(s.length+1,i.length)){"t("==s&&function(){var e="td";"table"!=a.t&&(a=new g("table",++t,[]),e="th",n.c.push(a)),a.c.push(new g("tr",++t,i.split(",").map((function(n){return new g(e,++t,new g("Sec",++t,n.trim()))}))))}();var c=new g("Sec",++t,i);if("#"==s[0]&&s.length<7)(a=n).c.push(new g("h"+s.length,++t,c));else if("*"==s[0]){var l="*o"==s?"ol":"ul";a.t!=l&&(a=new g(l,++t,[]),n.c.push(a)),a.c.push(new g("li",++t,c))}}}else(a=n).c.push(new g("p",++t,new g("Sec",++t,i)))}}return n.c}}var O=[new g("Sec",1,new g("p","this is a test")),new g("Sec",13,new g("p","The second line")),new g("table",2,[new g("tr",3,[new g("th",4,new g("Sec",5,"cell 1")),new g("th",6,new g("Sec",7,"cell 2"))]),new g("tr",8,[new g("td",9,new g("Sec",10,"cell 3")),new g("td",11,new g("Sec",12,"cell 4"))])])],C=k("# title 1\nsome description of a paragraph.\n## subtitle 2.\n* item x\n* item y\n\n## another subtitle 2.\n*o item 1\n*o item 2\n\n# more title 1.\na basic table.\nt( header cell 1, header cell 2\nt( content cell 1, content cell 2\n"),w=function e(t,n,a){Object(c.a)(this,e),this.title=t,this.content=n,this.parsedContent=a,n&&(this.parsedContent=k(n)),this.lastFocusId=void 0},y={currentBoard:0,lastId:1,lastFocusId:void 0,lastBoardId:void 0,boards:[new w("hola 1",void 0,O),new w("hola 2",void 0,C)]};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}m.a.initializeApp({apiKey:"AIzaSyB6JklybdPvmLcJigv8Z9dswNmF3LTQcFM",authDomain:"accessible-remote-board.firebaseapp.com",databaseURL:"https://accessible-remote-board.firebaseio.com",projectId:"accessible-remote-board",storageBucket:"accessible-remote-board.appspot.com",messagingSenderId:"493998861743",appId:"1:493998861743:web:4155c8afbc234b0e80135a",measurementId:"G-BB9MKZNJS9"});var B=m.a.database();function S(){return null!=m.a.auth().currentUser?m.a.auth().currentUser:null}function D(){return null!=m.a.auth().currentUser&&"dhf360@gmail.com"===m.a.auth().currentUser.email?m.a.auth().currentUser:null}var F=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).focus=n.focus.bind(Object(h.a)(n)),n.refSpan=r.a.createRef(),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"focus",value:function(){this.refSpan.current.focus()}},{key:"render",value:function(){return r.a.createElement("span",{tabIndex:"-1","data-focusid":this.props["data-focusid"],ref:this.refSpan},this.props.children)}}]),t}(r.a.Component),I=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).childrenRefs={},n.refHead=r.a.createRef(),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"createContent",value:function(){var e=this.props.content;if(e){var t={},n=function e(n,a){var o=[];for(var i in n)if("string"!==typeof(i=n[i])){if(i.t){var s=void 0,c=a,l=i.t,u=i.c;"table"===l?u=[new g("tbody",u)]:"Sec"===l&&(s=r.a.createRef(),t[i.id]=s,l=F,c=i.id),o.push(r.a.createElement(l,{key:i.id,ref:s,"data-focusid":c,children:e(u,c)}))}}else o.push(i);return o}(e);return this.childrenRefs=t,n}}},{key:"setRefFocus",value:function(e){this.childrenRefs[e]&&this.childrenRefs[e].current.focus(),y.boards[y.currentBoard].lastFocusId=e}},{key:"setLastFocus",value:function(){this.props.boardData&&this.props.boardData.lastFocusId?this.setRefFocus(this.props.boardData.lastFocusId):this.refHead.current.focus()}},{key:"componentDidUpdate",value:function(){this.props.autoFocus&&this.setLastFocus()}},{key:"componentDidMount",value:function(){this.props.autoFocus&&this.setLastFocus()}},{key:"render",value:function(){return r.a.createElement("div",{onClick:this.props.onClick},r.a.createElement("h1",{tabIndex:"-1",ref:this.refHead},this.props.title),this.createContent())}}]),t}(r.a.Component);I.defaultProps={autoFocus:!0};var M=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleContentChange=n.handleContentChange.bind(Object(h.a)(n)),n.handleTitleChange=n.handleTitleChange.bind(Object(h.a)(n)),n.state={title:"",content:""},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"handleTitleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleContentChange",value:function(e){this.setState({content:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"preview"),r.a.createElement(I,{title:this.state.title,content:k(this.state.content),autoFocus:!1}),r.a.createElement("h1",null,"Input"),r.a.createElement("label",{htmlFor:"input-title"},"Enter title"),r.a.createElement("input",{autoFocus:!0,type:"text",id:"input-title",onChange:this.handleTitleChange,defaultValue:this.state.title}),r.a.createElement("label",{htmlFor:"input-content"},"Enter some content"),r.a.createElement("textarea",{id:"input-content",onChange:this.handleContentChange,defaultValue:this.state.content}),r.a.createElement("button",{onClick:function(){return e.props.onDone({title:e.state.title,content:e.state.content})}},"Done!"),r.a.createElement("button",{onClick:this.props.onCancel},"Cancel"))}}]),t}(r.a.Component),P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={msg:""},n.handleMsgChange=n.handleMsgChange.bind(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"handleMsgChange",value:function(e){this.setState({msg:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null,"write a message for the speaker"),r.a.createElement("label",{htmlFor:"input-message"},"Enter message"),r.a.createElement("input",{autoFocus:!0,type:"text",id:"input-msg",onChange:this.handleMsgChange,defaultValue:this.state.msg}),r.a.createElement("button",{onClick:function(){return e.props.onDone(e.state.msg)}},"Done!"),r.a.createElement("button",{onClick:this.props.onCancel},"Cancel"))}}]),t}(r.a.Component),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickPrior=n.handleClickPrior.bind(Object(h.a)(n)),n.handleClickNext=n.handleClickNext.bind(Object(h.a)(n)),n.handleClickBoard=n.handleClickBoard.bind(Object(h.a)(n)),n.onDoneBoard=n.onDoneBoard.bind(Object(h.a)(n)),n.onDoneMsg=n.onDoneMsg.bind(Object(h.a)(n)),n.refBoard=r.a.createRef(),n.state={currentBoard:0,editing:!1,editCurrent:!1,writingMsg:!1},n.firstTime=!1,n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.listenEvents()}},{key:"listenEvents",value:function(){var e=this;this.firstTime=!0,B.ref("boards").once("value").then((function(e){var t=e.val();t&&Object.values(t).forEach((function(e){y.boards.push(new w(e.title,e.content))}))})),B.ref("boards").endAt().limitToLast(1).on("child_added",(function(t){if(e.firstTime)e.firstTime=!1;else{var n=t.val();console.log("ultimo boardData",n),n&&y.boards.push(new w(n.title,n.content))}})),B.ref("lastFocusId").on("value",(function(t){var n=t.val();console.log("ultimo focus",n),n&&(e.refBoard.current.setRefFocus(n),y.lastFocusId=n)})),B.ref("lastBoardId").on("value",(function(t){var n=t.val();console.log("ultimo lastBoardId",n,"tipo de datos",typeof n),"number"==typeof n&&(e.changeBoard(n,!0),y.lastBoardId=n)}))}},{key:"handleClickBoard",value:function(e){var t=e.target.dataset.focusid;t&&(y.boards[y.currentBoard].lastFocusId=t,D()&&B.ref("lastFocusId").set(t))}},{key:"changeBoard",value:function(e,t){e>=0&&e<y.boards.length&&(y.currentBoard=e,this.setState({currentBoard:e}),!t&&D()&&B.ref("lastBoardId").set(e))}},{key:"handleClickPrior",value:function(){var e=this.state.currentBoard;--e,this.changeBoard(e)}},{key:"handleClickNext",value:function(){var e=this.state.currentBoard;++e,this.changeBoard(e)}},{key:"onDoneBoard",value:function(e){var t=y.boards.length;this.setState({editing:!1}),D()&&(B.ref("boards").push(e),setTimeout((function(){return B.ref("lastBoardId").set(t)}),1e3))}},{key:"onDoneMsg",value:function(e){this.setState({writingMsg:!1});var t=S();t&&B.ref("msgs").push({name:t.displayName,msg:e})}},{key:"render",value:function(){var e=this;return this.state.editing?r.a.createElement(M,{onDone:this.onDoneBoard,onCancel:function(){return e.setState({editing:!1,editCurrent:!1})}}):this.state.writingMsg?r.a.createElement(P,{onDone:this.onDoneMsg,onCancel:function(){return e.setState({writingMsg:!1})}}):r.a.createElement("div",{"aria-live":"assertive"},r.a.createElement(I,{title:y.boards[y.currentBoard].title,content:y.boards[y.currentBoard].parsedContent,onClick:this.handleClickBoard,boardData:y.boards[y.currentBoard],ref:this.refBoard}),r.a.createElement("section",{"aria-label":"board controls"},r.a.createElement("button",{onClick:this.handleClickPrior},"previous board"),r.a.createElement("button",{onClick:this.handleClickNext},"Next board"),D()&&r.a.createElement("button",{onClick:function(t){return e.setState({editing:!0})}},"New board"),S()&&r.a.createElement("button",{onClick:function(t){return e.setState({writingMsg:!0})}},"ask  the speaker")))}}]),t}(r.a.Component),L=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={msgs:{}},n.cleanBoards=n.cleanBoards.bind(Object(h.a)(n)),n.cleanMsgs=n.cleanMsgs.bind(Object(h.a)(n)),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.listenEvents()}},{key:"listenEvents",value:function(){var e=this;this.firstTime=!0,B.ref("msgs").once("value").then((function(t){var n=t.val();n&&e.setState({msgs:n})})),B.ref("msgs").endAt().limitToLast(1).on("child_added",(function(t){if(e.firstTime)e.firstTime=!1;else{var n=t.val();n&&(e.setState({msgs:E({},e.state.msgs,{val:n})}),new Audio(v.a).play())}}))}},{key:"cleanBoards",value:function(){B.ref("boards").set(null)}},{key:"cleanMsgs",value:function(){B.ref("msgs").set(null),this.setState({msgs:{}})}},{key:"render",value:function(){var e=this.state.msgs;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.cleanBoards},"clean boards"),r.a.createElement("button",{onClick:this.cleanMsgs},"clean messages"),r.a.createElement("h1",null,"Users messages"),r.a.createElement("ul",{"aria-live":"assertive"},Object.keys(e).map((function(t){return r.a.createElement("li",{key:t},e[t].name,": ",e[t].msg)}))))}}]),t}(r.a.Component),x=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={user:null,showLogin:!0},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;m.a.auth().onAuthStateChanged((function(t){e.setState({user:t})}))}},{key:"handleSignIn",value:function(){var e=new m.a.auth.GoogleAuthProvider;m.a.auth().signInWithPopup(e)}},{key:"handleLogOut",value:function(){m.a.auth().signOut()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},!this.state.user&&this.state.showLogin?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleSignIn.bind(this)},"Sign in"),r.a.createElement("button",{onClick:function(){return e.setState({showLogin:!1})}},"dismis")):this.state.showLogin&&r.a.createElement("button",{onClick:this.handleLogOut.bind(this)},"Logout"),r.a.createElement(T,null),D()&&r.a.createElement(L,null))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[19,1,2]]]);
//# sourceMappingURL=main.4ea04a2b.chunk.js.map